{% extends "global/Page.html" %}
{% load otree %}

{% block content %}
<style>
    .image-display-container {
        display: flex;
        justify-content: space-around;
        gap: 20px;
        margin: 20px 0;
    }

    /* 將原本的 img-box 改良為裝文字的卡片 */
    .reason-card {
        border: 1px solid #dee2e6;
        border-radius: 12px;
        padding: 25px;
        text-align: left; /* 文字理由建議靠左對齊，較易閱讀 */
        width: 48%;
        background-color: #ffffff;
        box-shadow: 0 4px 6px rgba(0,0,0,0.05); /* 增加輕微陰影 */
        display: flex;
        flex-direction: column;
    }

    .reason-header {
        font-weight: bold;
        font-size: 1.1rem;
        color: #555;
        border-bottom: 2px solid #eee;
        margin-bottom: 15px;
        padding-bottom: 5px;
        text-align: center;
    }

    /* 處理受試者文字的容器 */
    .reasoning-text {
        font-size: 1.05rem;
        line-height: 1.6;
        color: #333;
        min-height: 120px;
        white-space: pre-wrap; /* 保持受試者原始的換行格式 */
        word-wrap: break-word;
    }

    .options-container {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 30px;
        padding: 20px;
        background-color: #f8f9fa;
        border-radius: 10px;
    }

    .btn-choice {
        min-width: 120px;
        padding: 12px 25px;
        font-weight: bold;
    }
</style>

<h3 class="mb-4 text-center"><b>第 {{ player.round_number }} 回合</b></h3>
<p class="text-center lead">請選擇您認為獨立AI判斷較好的決策理由：</p>

<div class="image-display-container">
    {% if reason_history %}
        {% for item in reason_history %}
            <div class="reason-card">
                <div class="reason-header">理由 A</div>
                <div class="reasoning-text">
                    {{ item.reason }}
                </div>
            </div>

            <div class="reason-card">
                <div class="reason-header">理由 B</div>
                <div class="reasoning-text">
                    {{ item.gpt_reason }}
                </div>
            </div>
        {% endfor %}
    {% endif %}
</div>

<div class="options-container">
    <button type="submit" name="prediction" value="A" class="btn btn-outline-primary btn-choice">理由 A</button>
    <button type="submit" name="prediction" value="Tie" class="btn btn-outline-secondary btn-choice">兩者平手</button>
    <button type="submit" name="prediction" value="B" class="btn btn-outline-primary btn-choice">理由 B</button>
</div>
{% endblock %}