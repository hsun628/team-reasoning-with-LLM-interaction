{% extends "global/Page.html" %}
{% load otree %}

{% block content %}
    <div class="card shadow-sm mt-4">
        <div class="card-body text-center">
            <h4 class="mb-4 text-center"><b>請等待AI和獨立的ChatGPT生成、判斷理由。</b></h4>
            <div class="spinner-border text-primary m-4" style="width: 3rem; height: 3rem;" role="status"></div>
            <p class="mb-4 text-center">此過程大約需要30-60秒，請勿重新整理或關閉視窗。</p>
        </div>
    </div>

    {# 隱藏按鈕，透過 JS 自動觸發 #}
    <button class="otree-btn-next btn btn-primary" id="auto_next" style="display:none;">Next</button>

    <script>
        window.onload = function() {
            // 頁面一顯示，立即點擊 Next 按鈕觸發 before_next_page 裡的 gpt_process
            setTimeout(function(){
                document.getElementById('auto_next').click();
            }, 500); // 延遲 0.5 秒確保頁面渲染完成
        };
    </script>
{% endblock %}